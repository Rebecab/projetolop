var x = 400;
var y = 200;
var rx  = 390;
var ry = 250;
var vidas = 3;
var pontos = 0;
var nivel =1;
var tamBloco = 20;
var imgbloco;
var colisao;
var imgzombie1;
var imgzombie2;
var fundo;

function preload(){
  imgbloco = loadImage("Crate.png");
  imgzombie1 = loadImage("zombie1.png");
  imgzombie2 = loadImage("zombie2.png");
  fundo = loadImage("BG.png");
  
  }
  
  
var cenario = [ 
  ['*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'], 
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','#','#','v','v','v','#','v','v','v','v','v','v','v','#','#','#','#','#','#','#','#','#','#','#','v','v','v','v','v','v','#','v','v','v','#','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','#','#','#','#','#','v','v','v','v','#','#','#','v','v','v','v','v','#','#','#','v','v','v','v','#','#','#','#','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','#','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','#','#','#','#','#','v','v','v','v','#','#','v','v','v','v','v','v','v','#','#','v','v','v','v','#','#','#','#','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','#','#','#','#','#','#','#','#','#','#','#','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','#','v','v','v','#','v','v','v','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','v','v','v','#','v','v','v','#','#','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'],
 
]; 

function colisao(px, py) {
  j = Math.floor( px / tamBloco ); 
  i = Math.floor( py / tamBloco );
  if ( cenario[i][j] == '#' ) {
     return true;     
  }
  else {
     return false;  
  }
  
}

function setup() {
  createCanvas(890, 530);
}


function draw() {
  image(fundo,-530,-160);
  fill(0,255,255);
  
  image(imgzombie2,rx,ry,45,45);
  if(ry<=455){ry++}
  if(rx<=810){rx++}  
  

  
    if (keyIsDown(LEFT_ARROW)){
      if ( ! colisao( x - 1 - tamBloco/2, y ) ) {
       x = x - 4; }
       }

    if (keyIsDown(RIGHT_ARROW)){
		if ( ! colisao( x + 50, y ) ) {
       x = x + 4;       
     } 
   }
    
      if (keyIsDown(UP_ARROW)){
      if ( ! colisao( x, y-10 ) ) {
       y = y - 4;       
     }} 
       
  if (keyIsDown(DOWN_ARROW)){
	  if ( ! colisao( x, y+45 ) ) {
       y = y + 4;       
     } }
    
    


  fill(255, 0, 0);
  image(imgzombie1,x,y,45,45);
  
  textSize(25);
  fill(255,0,0)
  text("Vidas:" +vidas,30,30);
  text("Pontos:" +pontos,400,30);
  text("Nivel: "+nivel,800,30)
  
   for ( i = 0; i < cenario.length; i++ ) { 
    for ( j = 0; j < cenario[0].length; j++ ) {  
      if ( cenario[i][j] == '#' ) {
         image(imgbloco,j*tamBloco,i*tamBloco);  
    }
	 
} 
}
}
