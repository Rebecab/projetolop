var x = 400;
var y = 205;
var rx  = 390;
var ry = 300;
var vidas = 3;
var pontos = 450;
var nivel =1;
var tamBloco = 35;
var colisao;
var imgzombie1;
var imgzombie2;
var fundo;
var imgpirulito;
var tempo=0;

function preload(){
  imgzombie1 = loadImage("zombie1.png");
  imgzombie2 = loadImage("zombie2.png");
  fundo = loadImage("BG.png");
  imgpirulito = loadImage("pirulito.png");
  }
  
var  
  cenario = [ 
  ['*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'], 
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','#','#','#','#','v','#','#','v','#','#','#','#','v','#','#','v','#','#','#','#','v','v','v','v','#'],
  ['#','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','#'],
  ['#','v','#','v','#','#','#','#','#','#','v','#','#','v','#','#','#','#','#','#','v','#','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','#'],
  ['#','#','#','#','v','#','v','#','v','#','#','v','v','#','#','v','#','v','#','v','#','#','#','#','#','#','#'],
  ['#','v','v','v','v','#','v','v','v','#','v','v','v','v','#','v','v','v','#','v','v','v','v','v','v','v','#'],
  ['#','v','#','#','#','#','v','#','#','#','v','v','@','v','#','#','#','v','#','#','#','#','v','v','v','v','#'],
  ['#','v','v','v','v','#','v','v','v','#','v','v','v','v','#','v','v','v','#','v','v','v','v','v','v','v','#'],
  ['#','#','#','#','v','#','v','#','v','#','#','#','#','#','#','v','#','v','#','v','#','#','#','v','v','v','#'],
  ['#','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','#','v','#','#','#','#','#','#','v','#','#','v','#','#','#','#','#','#','v','#','v','v','@','v','#'],
  ['#','v','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#']
];

function colisao(px, py) {
  j = Math.floor( px / tamBloco ); 
  i = Math.floor( py / tamBloco );
  if ( cenario[i][j] == '#' ) {
     return true;     
  }
  else {
     return false;  

  }
  
}
function colisao_bonus(px, py) {
  j = Math.floor( px / tamBloco ); 
  i = Math.floor( py / tamBloco );
  if ( cenario[i][j] == 'v' ) {
     cenario[i][j] = '*'
  
   return true;     
  }
  else {
     return false;  
  }
  
}

function setup() {
  createCanvas(946, 596);
  frameRate(30)


}


function draw() {
//if(tempo>900 && pontos<100)
//{
 // alert("acabou")
//}
tempo+=3
  image(fundo,-530,-160);
  fill(0,255,255);
  
  //*Colisão do fantasma com os blocos
  image(imgzombie2,rx,ry,36,33);
  if ( ! colisao( rx + 17 - tamBloco/2, ry ) ) {
       rx = rx - 10;       
     }

  if ( ! colisao( rx, ry +17 - tamBloco/2 ) ) {
       ry = ry - 10;       
     }

   
  

  //imageMode(CENTER)
//*Colisão blocos*
    if (keyIsDown(LEFT_ARROW)) {
     if ( ! colisao( x + 17 - tamBloco/2, y ) ) {
       x = x - 10;       
     }
   }
   if ( keyIsDown(RIGHT_ARROW)) {
     if ( ! colisao( x + 35, y ) ) {
       x = x + 10;       
     } 
   }

  if (keyIsDown(UP_ARROW)){
     if ( ! colisao( x, y +17 - tamBloco/2 ) ) {
       y = y - 10;       
     }
   }

  if (keyIsDown(DOWN_ARROW)){
     if ( ! colisao( x, y + 35 ) ) {
       y = y + 10;       
     } 
   }
    
    //*Colisão pontos*
      
  
 if (keyIsDown(LEFT_ARROW)) {
     if (  colisao_bonus( x + 20 - tamBloco/2, y ) ) {
       x = x - 10;
  pontos++;       
     }
   }
   if ( keyIsDown(RIGHT_ARROW)) {
     if (  colisao_bonus( x + 20, y ) ) {
       x = x + 10; 
    pontos++;             
     } 
   }

  if (keyIsDown(UP_ARROW)){
     if (  colisao_bonus( x, y + 20 - tamBloco/2 ) ) {
       y = y - 10; 
    pontos++;             
     }
   }

  if (keyIsDown(DOWN_ARROW)){
     if (  colisao_bonus( x, y + 20 ) ) {
       y = y + 10;  
  pontos++;            
     } 
   }
   


  fill(255, 0, 0);
  image(imgzombie1,x,y,36,33);
  
  textSize(25);
  fill(255,0,0)
  text("Vidas:" +vidas,20,25);
  text("Pontos:" +pontos,120,25);
  text("Nivel: "+nivel,300,25);
  text("Tempo: "+parseInt((tempo/30)),450,25);
  
   for ( i = 0; i < cenario.length; i++ ) { 
    for ( j = 0; j < cenario[0].length; j++ ) {  
      if ( cenario[i][j] == '#' ) {
         fill(160,82,45);
        rect(j*tamBloco,i*tamBloco,tamBloco,tamBloco);   
    }
      if(cenario[i][j] =='v')
      { 
        fill(255);
        ellipse(j*tamBloco+tamBloco/2,i*tamBloco+tamBloco/2,16,16);
      }
    
    if(cenario[i][j] =='@')
      { 
        fill(255);
        image(imgpirulito, j*tamBloco,i*tamBloco,40,40);
      }
} 
}

if(pontos==230)
{
   cenario = [ 
  ['*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'], 
  ['#','v','v','v','#','v','v','v','v','v','v','#','v','v','v','v','v','v','#','v','v','v','v','v','v','v','#'],
  ['#','#','#','v','#','v','#','#','#','#','v','#','v','#','#','#','#','v','#','v','#','v','#','v','#','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','#','v','#','v','#'],
  ['#','v','#','#','#','#','#','v','v','v','#','#','#','v','v','v','#','#','#','v','#','v','#','v','#','v','#'],
  ['#','v','v','v','#','v','v','v','#','v','v','#','v','v','v','v','v','v','#','v','#','v','#','v','#','v','#'],
  ['#','v','#','v','#','v','v','#','#','#','v','#','v','#','#','#','v','v','#','v','#','v','#','#','#','v','#'],
  ['#','v','#','v','v','v','v','v','#','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','v','v','#'],
  ['#','v','v','v','#','#','#','v','v','v','v','v','#','*','*','*','#','v','#','v','#','#','#','#','#','v','#'],
  ['#','v','#','#','#','v','v','v','#','v','v','v','#','*','*','*','#','v','#','v','v','v','v','v','v','v','#'],
  ['#','v','v','v','v','v','v','v','#','v','v','v','#','#','#','#','#','v','#','v','v','v','#','v','v','v','#'],
  ['#','v','#','#','#','#','#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#','v','v','v','#'],
  ['#','v','v','v','#','v','v','v','#','v','v','v','#','#','#','#','#','v','v','v','v','#','#','#','v','v','#'],
  ['#','#','#','v','#','v','#','#','#','v','v','v','v','v','#','v','v','v','v','v','#','#','#','#','#','v','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#']
];
x=50;
y=70;
nivel=2
}

if(pontos==450)
{
  cenario = [ 
  ['*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'], 
  ['#','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','#'],
  ['#','v','#','#','#','v','#','#','#','v','#','#','#','v','#','#','#','v','#','#','#','v','#','#','#','v','#'],
  ['#','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','#'],
  ['#','#','#','#','v','#','#','#','v','v','#','#','#','v','#','v','#','#','#','v','#','v','#','v','#','#','#'],
  ['#','*','v','v','*','v','v','*','v','v','*','v','v','*','v','v','*','v','v','*','v','v','*','v','v','*','#'],
  ['#','v','#','#','#','v','#','#','v','#','v','#','v','#','v','#','#','#','#','#','v','#','v','#','#','v','#'],
  ['#','v','*','*','v','*','*','v','*','*','v','*','*','v','*','*','v','*','*','v','*','*','v','*','*','v','#'],
  ['#','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','#'],
  ['#','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','v','#'],
  ['#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#','v','#'],
  ['#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*'],
  ['#','#','#','#','v','#','#','#','v','v','#','#','#','v','#','v','#','#','#','v','#','v','#','v','#','#','#'],
  ['#','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','#'],
  ['#','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','v','*','#'],
  ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#']
];
rx=50;
nivel=5;

}
}

